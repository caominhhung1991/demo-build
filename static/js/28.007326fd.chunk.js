(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[28],{1056:function(e,n,t){"use strict";t.r(n);var a=t(16),o=t(3),i=t(14),c=t(30),l=(t(822),t(0)),r=t.n(l),d=t(48),u=t(1051),s=t(670),h=t(42),v=t(10),m=t(710),f=function(e){var n,t=e.shiftConfig,a=e.isInput,o=e.setIsInput,i=Object(m.b)((function(e){return e.thucDonDuTru})).tongHopOfShifts,c=t.id,l=(null===i||void 0===i||null===(n=i[c])||void 0===n?void 0:n.tongPhanAn)||0,d=t.id===a.shiftId;return r.a.createElement("div",{className:"display-4 mt-1 kind-title"},"".concat(t.name," - ").concat(Object(v.b)(l)," ph\u1ea7n"),r.a.createElement("button",{className:["btn btn-sm ml-1 mb-1",d?"btn-warning":"btn-outline-warning"].join(" "),onClick:function(){o(d?{}:{shiftId:t.id,type:"soPhanAn"})}},"Edit"))};f.defaultProps={userConfig:{}};var g=Object(d.o)(f),b=t(864),C=function(e){var n=e.rowDatas.reduce((function(e,n){var t=((null===e||void 0===e?void 0:e.thanhTien)||0)+((null===n||void 0===n?void 0:n.thanhTien)||0);return Object(o.a)(Object(o.a)({},e),{},{soPhanAn:((null===e||void 0===e?void 0:e.soPhanAn)||0)+((null===n||void 0===n?void 0:n.soPhanAn)||0),soPhanThem:((null===e||void 0===e?void 0:e.soPhanThem)||0)+((null===n||void 0===n?void 0:n.soPhanThem)||0),thanhTien:Math.round(t)})}),{});return r.a.createElement(u.a.Summary.Row,null,r.a.createElement(u.a.Summary.Cell,{colSpan:6},r.a.createElement("div",{className:"text-center text-small font-weight-bold text-dark"},"T\u1ed5ng")),r.a.createElement(u.a.Summary.Cell,{colSpan:1},r.a.createElement("div",{className:"font-weight-bold  text-small text-danger float-right"},Object(v.a)(n.thanhTien))),r.a.createElement(u.a.Summary.Cell,{colSpan:1}))},p={soMonMan:"S\u1ed1 m\xf3n m\u1eb7n",soMonChay:"S\u1ed1 m\xf3n chay",soMonCT:"S\u1ed1 m\xf3n CT",soMonNuoc:"S\u1ed1 m\xf3n n\u01b0\u1edbc",tongPhan:"T\u1ed5ng ph\u1ea7n"},I=function(e){var n,t=e.dayTongHopData,a=e.isEditDutru,o=e.tongHopOfShifts,d=e.shiftId,s=e.customerGroup,h=(null===o||void 0===o||null===(n=o[d])||void 0===n?void 0:n.tongPhanAn)||0,m=(null===t||void 0===t?void 0:t.tongPhan)||0,f=(null===s||void 0===s?void 0:s.giaPhanAn)||0,g=h*f,b=Object(l.useState)([]),C=Object(c.a)(b,2),I=C[0],O=C[1];Object(l.useEffect)((function(){var e=[];t&&(e=(e=["soMonMan","soMonChay","soMonCT","soMonNuoc","tongPhan"].reduce((function(e,n){var a=(null===t||void 0===t?void 0:t[n])||0,o=a*f,c={loaiMon:n,soPhan:a,cost:Math.round(o/g*100*10)/10};return[].concat(Object(i.a)(e),[c])}),[])).filter((function(e){return e.soPhan>0}))),O(e)}),[t,o]);var y=[{dataIndex:"loaiMon",title:"Lo\u1ea1i m\xf3n",width:110,className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("div",{className:"font-weight-bold"},(null===p||void 0===p?void 0:p[e])||""):(null===p||void 0===p?void 0:p[e])||""}},{dataIndex:"soPhan",title:"S\u1ed1 ph\u1ea7n",className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("div",{className:"float-right font-weight-bold"},Object(v.a)(e)):r.a.createElement("div",{className:"float-right"},Object(v.a)(e))},width:70},{dataIndex:"cost",title:"Cost",width:60,className:" text-small",render:function(e,n){return"tongPhan"===n.loaiMon?r.a.createElement("small",{className:"float-right font-weight-bold"},h-m):r.a.createElement("small",{className:"float-right text-danger font-weight-bold"},e,"%")}}];return a&&r.a.createElement("div",null,r.a.createElement("div",{className:"font-weight-bold text-center text-danger mb-2"},"T\u1ed5ng h\u1ee3p s\u1ed1 ph\u1ea7n"),r.a.createElement(u.a,{rowKey:"loaiMon",columns:y,dataSource:I,pagination:!1,scroll:{x:240}}))};I.defaultProps={isEditDutru:!0,isHide:!1,shiftDuTruData:{}};var O=I,y=t(767),D=t(306),M=t(290),T={chiPhiCoDinh:"CP c\u1ed1 \u0111\u1ecbnh",chiPhiNguyenVatLieu:"CP NVL",tongChiPhi:"T\u1ed5ng CP",doanhThu:"Doanh Thu"},E=function(e){var n=e.history,t=e.dayTongHopData,a=e.dataSource,i=e.customerGroup,l=e.shiftConfig,d=e.tongHopOfShifts,s=l.id,h=r.a.useState([]),m=Object(c.a)(h,2),f=m[0],g=m[1],b=r.a.useState(0),C=Object(c.a)(b,2),p=C[0],I=C[1],O=r.a.useState(0),E=Object(c.a)(O,2),j=E[0],P=E[1];r.a.useEffect((function(){var e,n=j+p,t=((null===i||void 0===i?void 0:i.giaPhanAn)||0)*((null===d||void 0===d||null===(e=d[s])||void 0===e?void 0:e.tongPhanAn)||0),a=[{loaiChiPhi:"chiPhiCoDinh",tien:p||"",cost:n&&p?Math.round(p/n*100*100)/100:""},{loaiChiPhi:"chiPhiNguyenVatLieu",tien:j||"",cost:j&&n?Math.round(j/n*100*100)/100:""},{loaiChiPhi:"tongChiPhi",tien:n||"",cost:n&&t?Math.round(n/t*100*100)/100:""},{loaiChiPhi:"doanhThu",tien:t||"",cost:""}];g(a)}),[p,j,i,t,d,s]),r.a.useEffect((function(){if(i&&t){var e=(null===t||void 0===t?void 0:t.tongPhan)||0,n=Object(D.b)(i,{tongPhan:e});I(n)}}),[i,t]),r.a.useEffect((function(){var e=a.reduce((function(e,n){var t=((null===e||void 0===e?void 0:e.thanhTien)||0)+((null===n||void 0===n?void 0:n.thanhTien)||0);return Object(o.a)(Object(o.a)({},e),{},{thanhTien:Math.round(t)})}),{});P((null===e||void 0===e?void 0:e.thanhTien)||0)}),[a,d]);var N=[{dataIndex:"loaiChiPhi",title:"Lo\u1ea1i CP",width:120,className:" text-small",render:function(e){switch(e){case"chiPhiCoDinh":return r.a.createElement("div",{style:{textDecoration:"underline",color:"blue"},className:"hoverClass",onClick:function(){var e=[[y.b.MODAL_ID,y.a.openChiPhiCoDinhModal.id],[y.b.SHIFT_ID,l.id]];Object(M.d)(n,e)}},(null===T||void 0===T?void 0:T[e])||"");case"tongChiPhi":case"doanhThu":return r.a.createElement("div",{className:"font-weight-bold"},null===T||void 0===T?void 0:T[e]);default:return r.a.createElement("div",null,(null===T||void 0===T?void 0:T[e])||"")}}},{dataIndex:"tien",title:"Ti\u1ec1n",className:" text-small",render:function(e,n){return"tongChiPhi"===n.loaiChiPhi||"doanhThu"===n.loaiChiPhi?r.a.createElement("div",{className:"float-right font-weight-bold"},Object(v.a)(e)):r.a.createElement("div",{className:"float-right"},Object(v.a)(e))},width:70},{dataIndex:"cost",title:"Cost",width:60,className:" text-small",render:function(e){return e&&r.a.createElement("sub",{className:"text-danger font-weight-bold"},e,"%")}}];return r.a.createElement("div",{className:"mt-2"},r.a.createElement("div",{className:"font-weight-bold text-center text-danger mb-2"},"T\u1ed5ng h\u1ee3p chi ph\xed"),r.a.createElement(u.a,{rowKey:"loaiChiPhi",columns:N,dataSource:f,pagination:!1,scroll:{x:250}}))};E.defaultProps={isEditDutru:!0,isHide:!1,shiftDuTruData:{},dataSource:[]};var j=Object(d.o)(E),P=t(150),N=t(715),S=t(5),w=t(8),x=t(18),A=t(7),_=t.n(A),k=t(110),L=t(178),R=t(74),V=t(95),H=t(6);function K(e){return void 0!==e&&null!==e}var U=function(e){var n,t=e.itemPrefixCls,a=e.component,o=e.span,i=e.className,c=e.style,r=e.labelStyle,d=e.contentStyle,u=e.bordered,s=e.label,h=e.content,v=e.colon,m=a;return u?l.createElement(m,{className:_()((n={},Object(S.a)(n,"".concat(t,"-item-label"),K(s)),Object(S.a)(n,"".concat(t,"-item-content"),K(h)),n),i),style:c,colSpan:o},K(s)&&l.createElement("span",{style:r},s),K(h)&&l.createElement("span",{style:d},h)):l.createElement(m,{className:_()("".concat(t,"-item"),i),style:c,colSpan:o},l.createElement("div",{className:"".concat(t,"-item-container")},s&&l.createElement("span",{className:_()("".concat(t,"-item-label"),Object(S.a)({},"".concat(t,"-item-no-colon"),!v)),style:r},s),h&&l.createElement("span",{className:_()("".concat(t,"-item-content")),style:d},h)))};function G(e,n,t){var a=n.colon,o=n.prefixCls,i=n.bordered,c=t.component,r=t.type,d=t.showLabel,u=t.showContent,s=t.labelStyle,h=t.contentStyle;return e.map((function(e,n){var t=e.props,v=t.label,m=t.children,f=t.prefixCls,g=void 0===f?o:f,b=t.className,C=t.style,p=t.labelStyle,I=t.contentStyle,O=t.span,y=void 0===O?1:O,D=e.key;return"string"===typeof c?l.createElement(U,{key:"".concat(r,"-").concat(D||n),className:b,style:C,labelStyle:Object(H.a)(Object(H.a)({},s),p),contentStyle:Object(H.a)(Object(H.a)({},h),I),span:y,colon:a,component:c,itemPrefixCls:g,bordered:i,label:d?v:null,content:u?m:null}):[l.createElement(U,{key:"label-".concat(D||n),className:b,style:Object(H.a)(Object(H.a)(Object(H.a)({},s),C),p),span:1,colon:a,component:c[0],itemPrefixCls:g,bordered:i,label:v}),l.createElement(U,{key:"content-".concat(D||n),className:b,style:Object(H.a)(Object(H.a)(Object(H.a)({},h),C),I),span:2*y-1,component:c[1],itemPrefixCls:g,bordered:i,content:m})]}))}var Y=function(e){var n=l.useContext(X),t=e.prefixCls,a=e.vertical,o=e.row,i=e.index,c=e.bordered;return a?l.createElement(l.Fragment,null,l.createElement("tr",{key:"label-".concat(i),className:"".concat(t,"-row")},G(o,e,Object(H.a)({component:"th",type:"label",showLabel:!0},n))),l.createElement("tr",{key:"content-".concat(i),className:"".concat(t,"-row")},G(o,e,Object(H.a)({component:"td",type:"content",showContent:!0},n)))):l.createElement("tr",{key:i,className:"".concat(t,"-row")},G(o,e,Object(H.a)({component:c?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},n)))},F=function(e){return e.children},B=t(31),X=l.createContext({}),z={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function W(e,n,t){var a=e;return(void 0===n||n>t)&&(a=Object(B.a)(e,{span:t}),Object(R.a)(void 0===n,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),a}function J(e){var n,t=e.prefixCls,a=e.title,o=e.extra,i=e.column,c=void 0===i?z:i,r=e.colon,d=void 0===r||r,u=e.bordered,s=e.layout,h=e.children,v=e.className,m=e.style,f=e.size,g=e.labelStyle,b=e.contentStyle,C=l.useContext(V.b),p=C.getPrefixCls,I=C.direction,O=p("descriptions",t),y=l.useState({}),D=Object(w.a)(y,2),M=D[0],T=D[1],E=function(e,n){if("number"===typeof e)return e;if("object"===Object(x.a)(e))for(var t=0;t<L.b.length;t++){var a=L.b[t];if(n[a]&&void 0!==e[a])return e[a]||z[a]}return 3}(c,M);l.useEffect((function(){var e=L.a.subscribe((function(e){"object"===Object(x.a)(c)&&T(e)}));return function(){L.a.unsubscribe(e)}}),[]);var j=function(e,n){var t=Object(k.a)(e).filter((function(e){return e})),a=[],o=[],i=n;return t.forEach((function(e,c){var l,r=null===(l=e.props)||void 0===l?void 0:l.span,d=r||1;if(c===t.length-1)return o.push(W(e,r,i)),void a.push(o);d<i?(i-=d,o.push(e)):(o.push(W(e,d,i)),a.push(o),i=n,o=[])})),a}(h,E),P=l.useMemo((function(){return{labelStyle:g,contentStyle:b}}),[g,b]);return l.createElement(X.Provider,{value:P},l.createElement("div",{className:_()(O,(n={},Object(S.a)(n,"".concat(O,"-").concat(f),f&&"default"!==f),Object(S.a)(n,"".concat(O,"-bordered"),!!u),Object(S.a)(n,"".concat(O,"-rtl"),"rtl"===I),n),v),style:m},(a||o)&&l.createElement("div",{className:"".concat(O,"-header")},a&&l.createElement("div",{className:"".concat(O,"-title")},a),o&&l.createElement("div",{className:"".concat(O,"-extra")},o)),l.createElement("div",{className:"".concat(O,"-view")},l.createElement("table",null,l.createElement("tbody",null,j.map((function(e,n){return l.createElement(Y,{key:n,index:n,colon:d,prefixCls:O,vertical:"vertical"===s,bordered:u,row:e})})))))))}J.Item=F;var q=J,Q=t(705),Z=t(706),$=t(239),ee=q.Item,ne=function(e){var n,t=e.history,a=e.location,o=e.dayTongHopData,i=e.coSoId,d=e.shiftConfig,u=e.customerGroup,s=Object(M.c)(a,y.b.MODAL_ID),h=Object(M.c)(a,y.b.SHIFT_ID),m=Object(l.useState)(!1),f=Object(c.a)(m,2),g=f[0],b=f[1];Object(l.useEffect)((function(){var e=s===y.a.openChiPhiCoDinhModal.id&&"".concat(d.id)==="".concat(h);b(!!e)}),[s,d]);var C=(null===o||void 0===o?void 0:o.tongPhan)||0,p=(null===o||void 0===o?void 0:o.chiPhiCoDinh)||0,I=((null===o||void 0===o?void 0:o.soMonMan)||0)+((null===o||void 0===o?void 0:o.soMonChay)||0);return r.a.createElement(N.a,{title:r.a.createElement("div",{className:"text-dark"},r.a.createElement("i",{className:"fa fa-sliders mr-2"}),r.a.createElement("strong",null,y.a.openChiPhiCoDinhModal.name," - ",null===P.c||void 0===P.c||null===(n=P.c[i])||void 0===n?void 0:n.name)),isOpen:g,onCancel:function(){return t.push("?")},centered:!0,width:"650px"},r.a.createElement("div",{className:"mb-3"},r.a.createElement("strong",null,"T\u1ed5ng ph\u1ea7n: ",Object(v.a)(C),", T\u1ed5ng ph\u1ea7n c\u01a1m: ",Object(v.a)(I)," - Chi ph\xed c\u1ed1 \u0111\u1ecbnh: ",Object(v.a)(p))),r.a.createElement(q,{bordered:!0,column:1,size:"small"},$.b.map((function(e){var n=(null===u||void 0===u?void 0:u[e.id])||0,t="".concat(e.name," = ").concat(Object(v.a)(n)," x ").concat(Object(v.a)(C)," ph\u1ea7n"),a=C*n;if("gao"===e.id){var o=n,i=(null===u||void 0===u?void 0:u.dinhLuongGao)||0,c=Math.round(i/100)/10;a=(n*=c)*I,t="Gi\xe1 ".concat(e.name," x \u0110L g\u1ea1o = ").concat(Object(v.a)(o)," x ").concat(c," x ").concat(Object(v.a)(I)," ph\u1ea7n")}var l=Object(v.l)(a,p);return r.a.createElement(ee,{key:e.id,label:t,span:1},r.a.createElement(Q.a,{gutter:5},r.a.createElement(Z.a,{span:12,className:"font-weight-bold"},r.a.createElement("div",{className:"float-right"},Object(v.a)(a))),r.a.createElement(Z.a,{span:12},r.a.createElement("small",{className:"text-danger font-weight-bold"},"(",l,"%)"))))}))))};ne.defaultProps={};var te=Object(d.o)(ne),ae=t(801),oe=t(115),ie=t(295),ce=t(293),le=t(291),re=r.a.lazy((function(){return t.e(35).then(t.bind(null,1050))}));n.default=Object(d.o)((function(e){var n=e.shiftConfig,t=e.soMonMan,d=e.isInput,v=e.setIsInput,f=Object(m.a)(),p=Object(m.b)((function(e){return e.diaDiem})).diaDiemData,I=null===p||void 0===p?void 0:p.id,y=Object(m.b)((function(e){return e.nguyenLieu})).nguyenLieus,M=Object(m.b)((function(e){return e.recipe})),T=M.recipes,E=M.ingreRecipeData,P=Object(m.b)((function(e){return e.thucDonDuTruSetting})),N=P.cauHinhDuTrus,S=P.recipeKinds,w=P.nhomGiaMonAnData,x=Object(m.b)((function(e){return e.thucDonDuTru})),A=x.isLoading,_=r.a.useMemo((function(){return new b.a}),[]),k=e.userConfig,L=e.userConfigHandle,R=k.yearId,V=k.weekId,H=k.customerId,K=k.dayId,U=n.id,G=(null===w||void 0===w?void 0:w.giaPhanAn)||0,Y=r.a.useMemo((function(){return null===N||void 0===N?void 0:N[U]}),[N,U]),F=null===x||void 0===x?void 0:x["duTruDatas/".concat(U)],B=null===x||void 0===x?void 0:x["thucDonDatas/".concat(U)],X=null===x||void 0===x?void 0:x["tongHopDuTruData/".concat(H,"/").concat(U)],z=Object(l.useState)(!1),W=Object(c.a)(z,2),J=W[0],q=W[1],Q=Object(l.useState)([]),Z=Object(c.a)(Q,2),$=Z[0],ee=Z[1];r.a.useEffect((function(){I&&H&&f(Object(ie.d)(I,H))}),[I,H]),r.a.useEffect((function(){var e=[];Y&&F&&B&&K&&y&&E&&(e=(e=oe.a.reduce((function(e,n){var t=n.id,a=null===Y||void 0===Y?void 0:Y[n.id],o=((null===a||void 0===a?void 0:a.values)||[]).map((function(e){var n,a=null===F||void 0===F?void 0:F[e],o=null===B||void 0===B?void 0:B[e],i=null===o||void 0===o?void 0:o.recipeId,c=(null===a||void 0===a?void 0:a.soPhanAn)||0,l=(null===a||void 0===a?void 0:a.soPhanThem)||0,r=c+l,d=(null===a||void 0===a?void 0:a.ghiChu)||"",u=(null===a||void 0===a?void 0:a.dieuChinh)||{},s=(null===E||void 0===E?void 0:E[i])||[],h=f(Object(le.d)({nguyenLieus:s},u,[i])),v=r*h;return{id:"".concat(e),name:(null===S||void 0===S||null===(n=S[e])||void 0===n?void 0:n.name)||e,loaiMonId:t,recipeId:i,tenMon:i,giaMon:h,thanhTien:v,ghiChu:d,soPhanThem:l,soPhanAn:c,tongPhan:r,dieuChinh:u,chiPhiNVL:v}}));return[].concat(Object(i.a)(e),Object(i.a)(o))}),[])).filter((function(e){return e.tenMon}))),ee(e)}),[Y,F,B,K,y,E]),r.a.useEffect((function(){var e=[I,R,V,"shiftIds",U,"customerIds",H,K,"kindIds"];return I&&R&&V&&U&&H&&K&&f(Object(ce.b)(e,{shiftId:U})),function(){return Object(ce.k)(U)}}),[I,R,V,U,H,K]),r.a.useEffect((function(){var e=[I,R,V,"shiftIds",U,"thucDons",K,"kindIds"];return I&&R&&V&&U&&K&&f(Object(ce.c)(e,{shiftId:U})),function(){return Object(ce.j)(U)}}),[I,R,V,U,K]),r.a.useEffect((function(){if(F&&Y&&H&&w&&$.length>0){var e=ne(F,$);f(Object(ce.p)(H,U,e))}else f(Object(ce.p)(H,U,null))}),[H,F,Y,w,$]),r.a.useEffect((function(){v({})}),[K,I,H,R,V]);var ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={dayDuTruData:e,dayId:K,dayThucDonData:B,recipeDatas:T,soMonMan:t},o=ae.a.getSoTongPhan(Y,a),i=Object(D.b)(w,{tongPhan:o}),c=n.reduce((function(e,n){return e+(n.chiPhiNVL||0)}),0),l=i+c,r={soMonMan:ae.a.getSoMonMan(Y,a),soMonMan_CoCanh:ae.a.getSoMonMan_CoCanh(Y,a),soMonNuocChay:ae.a.getSoMonNuocChay(Y,a),soMonCT_CoCom:ae.a.getSoMonCT_CoCom(Y,a),soMonChay:ae.a.getSoMonChay(Y,a),soMonCT:ae.a.getSoMonCT(Y,a),soMonNuoc:ae.a.getSoMonNuoc(Y,a),soMonCanh:ae.a.getSoMonCanh(Y,a),soMonXao:ae.a.getSoMonXao(Y,a),soMonTrangMieng:ae.a.getSoMonTrangMieng(Y,a),tongPhan:o,chiPhiCoDinh:i,chiPhiNVL:c,tongChiPhi:l};return r},de=function(e,n){var t,c,l,r=null===n||void 0===n?void 0:n.recipeKindId,d=null===n||void 0===n?void 0:n.type,u=[I,R,V,"shiftIds",U,"customerIds",H,K,"kindIds",r,d],s=null===F||void 0===F||null===(t=F[r])||void 0===t?void 0:t[d];switch(d){case"ghiChu":s=s||"";break;case"soPhanAn":case"soPhanThem":s=s||0;break;case"dieuChinh":var v=null===n||void 0===n?void 0:n.nguyenLieuId,m=null===n||void 0===n?void 0:n.recipeId;u=[].concat(Object(i.a)(u),[m,v]),s=(null===(c=s)||void 0===c||null===(l=c[m])||void 0===l?void 0:l[v])||0}var g=!Object(h.isEqual)(s,e),b=function(){q(!1)};if(r&&d&&g)switch(q(!0),d){case"soPhanAn":case"soPhanThem":var C=Object(o.a)({},F),p=(null===C||void 0===C?void 0:C.ghiChu)||null;p||(p=""),Object(h.set)(C,[r,d],e);var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null===e||void 0===e?void 0:e.soMonCanh)||0,t=(null===e||void 0===e?void 0:e.soMonMan_CoCanh)||0,i=(null===e||void 0===e?void 0:e.soMonNuocChay)||0,c=(null===e||void 0===e?void 0:e.soMonCT_CoCom)||0,l=(null===e||void 0===e?void 0:e.soMonXao)||0,r=(null===e||void 0===e?void 0:e.soMonTrangMieng)||0,d=n-t-i+c,u=l-i,s=[{id:oe.b.monCanhConfig.id,soPhanAn:d===1/0?0:d},{id:oe.b.monXaoConfig.id,soPhanAn:u===1/0?0:u},{id:oe.b.dessertConfig.id,soPhanAn:r===1/0?0:r}],h=s.reduce((function(e,n){var t,i,c=null===(t=Y[n.id])||void 0===t||null===(i=t.values)||void 0===i?void 0:i[0],l=(null===F||void 0===F?void 0:F[c])||{},r=(null===l||void 0===l?void 0:l.ghiChu)||null;r||(r="");var d=Object(o.a)(Object(o.a)({},l),{},{ghiChu:r,soPhanAn:n.soPhanAn});return Object(o.a)(Object(o.a)({},e),{},Object(a.a)({},c,d))}),{});return h}(ne(C,[])),y=null===C||void 0===C?void 0:C[r],D=Object(o.a)(Object(o.a)({},O),{},Object(a.a)({},r,Object(o.a)({ghiChu:p},y))),M=[I,R,V,"shiftIds",U,"customerIds",H,K,"kindIds"];f(Object(ce.n)(M,D,b,{}));break;case"ghiChu":case"dieuChinh":f(Object(ce.h)(u,e,b,{}))}},ue=_.getDuTruItemColumns(Object(o.a)(Object(o.a)({},e),{},{dayId:K,giaPhanAn:G,customerId:H,nhomGiaMonAnDataId:null===w||void 0===w?void 0:w.id,coSoId:I,shiftId:U,isInput:d,setIsInput:v,onUpdate:de}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row duTruItem mb-3"},r.a.createElement("div",{className:"col-lg-9"},r.a.createElement(g,{userConfigHandle:L,userConfig:k,shiftConfig:n,isInput:d,setIsInput:v}),r.a.createElement("div",{className:"mb-2"},r.a.createElement(u.a,{size:"small",loading:A||J,rowKey:"id",bordered:!0,columns:ue,dataSource:$,pagination:!1,expandAll:!0,scroll:{x:800},expandable:{expandedRowRender:function(e){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(s.a,{className:"osac-spin"})},r.a.createElement(re,{record:e,shiftId:U,isInput:d,setIsInput:v,onUpdate:de}))}},summary:function(e){return r.a.createElement(C,{rowDatas:e})}}))),r.a.createElement("div",{className:"col-lg-3"},r.a.createElement(O,{shiftId:U,dayTongHopData:X}),r.a.createElement(j,{shiftConfig:n,dayId:K,coSoId:I,customerId:H,yearId:R,weekId:V,dayTongHopData:X,dataSource:$}))),r.a.createElement(te,{shiftConfig:n,dayTongHopData:X,dayId:K,coSoId:I}))}))},767:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return o}));var a={ID:"id",MODAL_ID:"modalId",CUSTOMER_GROUP_ID:"customerGroupId",COSO_ID:"coSoId",NHANVIEN_ID:"nhanvienId",VIEW_STATUS:"pagestatus",ADD_NHANVIEN:"addNhanVien",BAO_CAO_KIND:"baoCaoKind",REPORT_ID:"reportId",OPEN_MODAL:"openModal",CANTIN_ID:"cantinId",CUSTOMER_ID:"customerId",VIEW_KIND_ID:"viewKindId",RECIPE_ID:"recipeId",IS_MON_PHU:"isMonPhu",INGRE_ID:"ingreID",VENDOR_ID:"nhaCungCapId",KIND_ID:"kindId",DAY:"day",DAY_ID:"dayId",SHIFT:"shift",SHIFT_ID:"shiftId",BOPHAN_ID:"boPhanId",WEEK_ID:"weekId",MONTH_ID:"monthId",YEAR_ID:"yearId",KETOAN_DRAWER_ID:"keToanDrawerId",KHUVUC_ID:"khuVucId",LOAITAISAN_ID:"loaiTaiSanId",TAISAN_ID:"taiSanId"},o={editNhanvien:{id:"editNhanvien",name:"C\u1eadp nh\u1eadt Nh\xe2n Vi\xean"},addNhanvien:{id:"addNhanvien",name:"Th\xeam Nh\xe2n Vi\xean"},viewNhanvien:{id:"viewNhanvien",name:"Xem Nh\xe2n Vi\xean"},themBaoCao:{id:"themBaoCao",name:"Th\xeam b\xe1o c\xe1o"},addRecipe:{id:"addRecipe",name:"Th\xeam m\xf3n",getTitle:function(){return"Th\xeam M\xf3n M\u1edbi"}},editRecipe:{id:"editRecipe",name:"C\u1eadp nh\u1eadt m\xf3n",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},addIngre:{id:"addIngre",name:"Th\xeam Nguy\xean Li\u1ec7u",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},editIngre:{id:"editIngre",name:"Update Nguy\xean Li\u1ec7u",getTitle:function(e){return"Update ".concat(String(e).toUpperCase())}},vendorModal:{id:"vendorModal",name:"Nh\xe0 Cung C\u1ea5p"},selectRecipe:{id:"selectRecipe",name:"Ch\u1ecdn",getTitle:function(e){return"Ch\u1ecdn ".concat(e)}},configCantin:{id:"configCantin",name:"Th\xf4ng tin c\u0103n tin"},addChiPhiPhatSinh:{id:"addChiPhiPhatSinh",name:"Chi Ph\xed Ph\xe1t Sinh"},openDutrus:{id:"openDutrus",name:"M\u1edf D\u1ef1 Tr\xf9"},addSoPhanAn:{id:"addSoPhanAn",name:"Th\xeam S\u1ed1 Ph\u1ea7n \u0102n"},addExtraSoPhanAn:{id:"addExtraSoPhanAn",name:"Th\xeam S\u1ed1 Ph\u1ea7n \u0102n"},addCommentByRecipe:{id:"addCommentByRecipe",name:"Th\xeam Ghi Ch\xfa Cho B\u1ebfp"},addCommentByShift:{id:"addCommentByShift",name:"Th\xeam Ghi Ch\xfa Cho T\u1eebng Ca"},openChiPhiCoDinhModal:{id:"openChiPhiCoDinhModal",name:"Chi Ph\xed C\u1ed1 \u0110\u1ecbnh"},addNgayCong:{id:"addNgayCong",name:"Th\xeam ng\xe0y c\xf4ng"},tongHopLuong:{id:"tongHopLuong",name:"T\u1ed5ng h\u1ee3p l\u01b0\u01a1ng"},confirmSave:{id:"confirmSave",name:"X\xe1c nh\u1eadn l\u01b0u"},addNhanVienTangCa:{id:"addNhanVienTangCa",name:"Th\xeam Nh\xe2n Vi\xean T\u0103ng Ca"},viewChiTietChamCong:{id:"viewChiTietChamCong",name:"Xem Chi Ti\u1ebft Ch\u1ea5m C\xf4ng"}}},801:function(e,n,t){"use strict";var a=t(3),o=t(49),i=t(50),c=t(83),l=t(82),r=(t(0),t(42)),d=t(84),u=(t(311),t(115)),s=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.a)(this,t),(e=n.call(this,{},{},{})).canTinId=a.canTinId,e.shiftArray=Object(r.isArray)(a.shiftArray)?a.shiftArray:[],e.shiftArrayDuTru=Object(r.isArray)(a.shiftArrayDuTru)?a.shiftArrayDuTru:[],e.caBangCaFields=Object(r.isArray)(a.caBangCaFields)?a.caBangCaFields:[],e.exportDuTru="function"===typeof a.exportDuTru?a.exportDuTru:r.noop,e.mealPrice=0,e.chiPhiCoDinh=[],e}return Object(i.a)(t,null,[{key:"getSoMonWithConditon",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.dayDuTruData,o=t.dayThucDonData,i=t.condition;if(i){var c,l=(null===e||void 0===e||null===(c=e[n])||void 0===c?void 0:c.values)||[],r=l.reduce((function(e,n){var t,c,l,r=null===o||void 0===o||null===(t=o["".concat(n)])||void 0===t?void 0:t.recipeId;if(!r)return e;var d=((null===a||void 0===a||null===(c=a[n])||void 0===c?void 0:c.soPhanAn)||0)+((null===a||void 0===a||null===(l=a[n])||void 0===l?void 0:l.soPhanThem)||0);return r.indexOf(i)>-1?e+d:e}),0);return r}}},{key:"getSoMon",value:function(e,n){var t,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.dayDuTruData,i=(null===e||void 0===e||null===(t=e[n])||void 0===t?void 0:t.values)||[],c=i.reduce((function(e,n){var t,a;return e+(((null===o||void 0===o||null===(t=o[n])||void 0===t?void 0:t.soPhanAn)||0)+((null===o||void 0===o||null===(a=o[n])||void 0===a?void 0:a.soPhanThem)||0))}),0);return c}},{key:"getSoMonMan",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monManConfig.id,o=t.getSoMon(e,a,n),i=n.soMonMan,c=void 0===i?2:i;return Math.round(o/c)}},{key:"getSoMonMan_CoCanh",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.monManConfig.id,i=t.getSoMonWithConditon(e,o,Object(a.a)(Object(a.a)({},n),{},{condition:"canh"}));return i}},{key:"getSoMonCT_CoCom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.monCTConfig.id,i=t.getSoMonWithConditon(e,o,Object(a.a)(Object(a.a)({},n),{},{condition:"c\u01a1m"}));return i}},{key:"getSoMonNuocChay",value:function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.dayDuTruData,o=t.dayThucDonData,i=t.recipeDatas,c=u.b.vegConfig.id,l=(null===e||void 0===e||null===(n=e[c])||void 0===n?void 0:n.values)||[],r=l.reduce((function(e,n){var t,c,l,r,d=null===o||void 0===o||null===(t=o["".concat(n)])||void 0===t?void 0:t.recipeId;if(!d)return e;var u="M\xf3n n\u01b0\u1edbc chay"===(null===i||void 0===i||null===(c=i[d])||void 0===c?void 0:c.categoryRecipe),s=(null===a||void 0===a||null===(l=a[n])||void 0===l?void 0:l.soPhanAn)||0,h=(null===a||void 0===a||null===(r=a[n])||void 0===r?void 0:r.soPhanThem)||0;return u?e+(s+h):e}),0);return r}},{key:"getSoMonChay",value:function(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=u.b.vegConfig.id,i=t.getSoMon(e,o,a),c=(null===e||void 0===e||null===(n=e[o])||void 0===n?void 0:n.values)||[],l=1===c.length?1:2;return Math.round(i/l)}},{key:"getSoMonCT",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monCTConfig.id,o=t.getSoMon(e,a,n);return Math.round(o)}},{key:"getSoMonNuoc",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=u.b.monNuocConfig.id,o=t.getSoMon(e,a,n);return Math.round(o)}},{key:"getSoMonXao",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n);return a+o}},{key:"getSoMonCanh",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n),i=0,c=0,l=a+o-i+c;return l}},{key:"getSoMonTrangMieng",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoTongPhan(e,n);return Math.round(a)}},{key:"getSoTongPhan",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.getSoMonMan(e,n),o=t.getSoMonChay(e,n),i=t.getSoMonNuoc(e,n),c=t.getSoMonCT(e,n);return a+o+i+c}}]),t}(d.a);n.a=s},864:function(e,n,t){"use strict";var a=t(14),o=t(49),i=t(50),c=t(83),l=t(82),r=t(0),d=t.n(r),u=t(801),s=t(10),h=t(767),v=t(700),m=t(705),f=t(706),g=t(437),b=t(312),C=t(290),p=v.a.TextArea,I={name:{id:"name",name:"Lo\u1ea1i m\xf3n",width:130,fixed:!0,render:function(e,n,t){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(null===o||void 0===o?void 0:o.recipeKinds)||{};return d.a.createElement("strong",{className:"ml-2",style:{color:"blue"}},(null===i||void 0===i||null===(a=i[e])||void 0===a?void 0:a.name)||e)}},loaiMon:{id:"name",name:"Lo\u1ea1i m\xf3n",className:"text-small",width:130,render:function(e){return d.a.createElement("strong",null,e)}},tenMon:{id:"tenMon",name:"T\xean m\xf3n",className:"text-small",width:190,render:function(e,n,t,a){var o=a.shiftId,i=a.coSoId,c=a.customerId,l=a.dayId,r=a.history,u=a.customerGroupId,s=a.isView,v=e,m=n.id;return v?d.a.createElement("div",{style:{color:"#1012ff"},className:"hoverClass font-weight-bold",onClick:function(){if(s)return null;var e=[[h.b.MODAL_ID,h.a.editRecipe.id],[h.b.COSO_ID,i],[h.b.CUSTOMER_ID,c],[h.b.CUSTOMER_GROUP_ID,u],[h.b.RECIPE_ID,v]];Object(C.d)(r,e)}},v):d.a.createElement("div",{className:"hoverClass",onClick:function(){if(s)return null;var e=[[h.b.MODAL_ID,h.a.selectRecipe.id],[h.b.SHIFT_ID,o],[h.b.KIND_ID,m],[h.b.DAY_ID,l],[h.b.RECIPE_ID,v]];Object(C.d)(r,e)}},"--")}},giaMon:{id:"giaMon",name:"Gi\xe1 m\xf3n",className:"text-small",width:80,align:"center",render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.giaPhanAn,i=d.a.createElement("strong",{className:"text-danger float-right"},d.a.createElement("sub",null,Object(s.f)(e,o),"%")),c=d.a.createElement(m.a,null,d.a.createElement(f.a,{sm:24}," ",i));return e?c:""}},soPhanThem:{id:"soPhanThem",name:"SP th\xeam",className:"text-small",align:"center",width:80,render:function(e,n,t,a){var o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u="soPhanThem",s=n.id;return o.shiftId!==c||o.type!==u||r?d.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){return i({shiftId:c,type:u,recipeKindId:s})}},e||"--"):d.a.createElement(g.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===s,size:"small",step:5,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);l(n,{type:u,recipeKindId:s})}})}},soPhanAn:{id:"soPhanAn",name:"SP \u0103n",align:"center",className:"text-small",width:70,render:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u="soPhanAn",s=n.id,h=n.loaiMonId,v=new b.a;return v.checkNotAddSoPhanAn(h)?e||"":o.shiftId!==c||o.type!==u||r?d.a.createElement("div",{className:"hoverClass font-weight-bold",onClick:function(){i({shiftId:c,type:u,recipeKindId:s})}},e||"--"):d.a.createElement(g.a,{tabIndex:t+1,autoFocus:(null===o||void 0===o?void 0:o.recipeKindId)===s,size:"small",min:0,step:10,defaultValue:e||"",onBlur:function(e){var n=Number(e.target.value);l(n,{type:u,recipeKindId:s})}})}},thanhTien:{id:"thanhTien",name:"Th\xe0nh ti\u1ec1n",align:"right",className:"text-small",width:90,render:function(e){return e?Object(s.b)(e):""}},ghiChu:{id:"ghiChu",name:"Ghi ch\xfa",width:230,className:"text-small",render:function(e,n,t,a){var o=a.isInput,i=a.setIsInput,c=a.shiftId,l=a.onUpdate,r=a.isView,u=n.id;return o.shiftId!==c||"ghiChu"!==o.type||r?d.a.createElement("div",{className:"hoverClass",onClick:function(){return i({shiftId:c,recipeKindId:u,type:"ghiChu"})}},e||"--"):d.a.createElement(p,{rows:2,tabIndex:t+1,autoFocus:u===o.recipeKindId,size:"small",defaultValue:e||"",style:{width:"100%"},onBlur:function(e){var n=e.target.value;l(n,{type:"ghiChu",recipeKindId:u})}})}}},O=t(66),y=t.n(O),D=(t(746),t(48)),M=t(42),T=t(291),E=t(710),j=Object(r.memo)((function(e){var n,t,a,o,i,c=e.history,l=e.cellId,r=e.isMonPhu,u=e.dayId,v=e.loaiMonId,m=e.onDelete,f=e.visibleCost,g=e.shiftData,b=e.isView,p=e.isAfter,I=Object(E.a)(),O=Object(E.b)((function(e){return e.nguyenLieu})).nguyenLieus,y=Object(E.b)((function(e){return e.recipe})).ingreRecipeData,D=Object(E.b)((function(e){return e.thucDonDuTruSetting})).nhomGiaMonAnData,M=Object(E.b)((function(e){return e.thucDonDuTru})).thucDonDuTruWeek,j=Object(E.b)((function(e){return e.thucDon})).hienThiTatCaNoiPhucVu,P=null===D||void 0===D?void 0:D.giaPhanAn,N=null===g||void 0===g?void 0:g.id,S=null===M||void 0===M||null===(n=M[N])||void 0===n||null===(t=n.thucDons)||void 0===t||null===(a=t[u])||void 0===a||null===(o=a.kindIds)||void 0===o||null===(i=o["".concat(v)])||void 0===i?void 0:i.recipeId,w=function(e){e.stopPropagation(),window.confirm("X\xe1c nh\u1eadn x\xf3a ".concat(S))&&m(v,u)},x=d.a.useCallback((function(){var e=(null===y||void 0===y?void 0:y[S])||[];if(0===e.length||!f)return null;var n={nguyenLieus:e},t=I(Object(T.d)(n));return d.a.createElement("span",{className:"cost-style"},"(".concat(Object(s.f)(t,P),"%)"))}),[S,y,P,O,f]);return d.a.createElement("div",{id:l,className:["recipe-style",S?"":"text-center"].join(" "),style:{overflowY:"auto",fontSize:"14px"},onClick:function(){if(p||b)return null;var e=[[h.b.MODAL_ID,h.a.selectRecipe.id],[h.b.SHIFT_ID,N],[h.b.KIND_ID,v],[h.b.DAY_ID,u],[h.b.IS_MON_PHU,r],[h.b.RECIPE_ID,S]];Object(C.d)(c,e)}},j?"":x()," ",S||(S?d.a.createElement("span",{className:"text-black-50"},"Thi\u1ebfu ".concat(S)):p?"":"--")," ",b||p?null:S&&d.a.createElement("div",{className:"delete-icon",onClick:w},d.a.createElement("i",{className:"fa fa-close"})))}));j.defaultProps={onDelete:M.noop,visibleCost:!0};var P=Object(D.o)(j),N="Admin",S=function(e){Object(c.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(o.a)(this,t),(a=n.call(this,e)).tableColumns=[I.name],a.duTruItemColumns=[I.loaiMon,I.tenMon,I.giaMon,I.soPhanThem,I.soPhanAn,I.thanhTien,I.ghiChu],a}return Object(i.a)(t,[{key:"getTableColumns",value:function(e){var n=this,t=e.isView,o=e.yearId,i=e.weekId,c=e.onDelete,l=e.visibleCost,r=e.shiftData;if(!i||!o)return[];var u=this.tableColumns.map((function(t){return n.getGeneralFields(t,e)})),h=Array(7).fill(1).reduce((function(e,n,u){var h=n+u,v=Object(s.h)()===N,m=y()(o,"YYYY").week(i).day(n+u),f=m.format("dddd"),g=m.format("DD/MM"),b=y()().format("DD-MM-YYYY")===m.format("DD-MM-YYYY"),C=y()().subtract(1,"day").isAfter(m),p=b?{border:"1px solid lightblue"}:{};v&&(C=!1);var I={id:h,name:"".concat(f," (").concat(g,")"),width:160,align:"center",render:function(e,n,a){var o=n.id,i=n.isMonPhu,u="".concat(null===r||void 0===r?void 0:r.id,"-").concat(n.id,"-").concat(h);return d.a.createElement("div",{style:p},d.a.createElement(P,{shiftData:r,visibleCost:l,isView:t,isMonPhu:i,cellId:u,index:a,dayId:"".concat(f).toLowerCase(),isAfter:C,loaiMonId:o,onDelete:c}))}};return[].concat(Object(a.a)(e),[I])}),[]).map((function(t){return n.getGeneralFields(t,e)}));return u=[].concat(Object(a.a)(u),Object(a.a)(h))}},{key:"getDuTruItemColumns",value:function(e){var n=this;return this.duTruItemColumns.map((function(t){return n.getGeneralFields(t,e)}))}}]),t}(u.a);n.a=S}}]);